<!DOCTYPE html>
<html>
<head>
    <title>調布市立小中学校マップ</title>
    <meta charset="utf-8">
    <style>
        #map {
            height: 100%;
            width: 100%;
            position: absolute;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        let map;
        let markers = [];

        function initMap() {
            const position = { lat: 35.6512, lng: 139.5453 }; // 調布市の中心付近
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 13,
                center: position,
            });

            // 第一小学校と第二小学校のマーカーを追加
            const schools = [
                {
                    '名称': '第一小学校',
                    '緯度（10進法）': 35.65499,
                    '経度（10進法）': 139.54347
                },
                {
                    '名称': '第二小学校',
                    '緯度（10進法）': 35.6465,
                    '経度（10進法）': 139.55659
                },
                {
                    '名称': '第三小学校',
                    '緯度（10進法）': 35.65459,
                    '経度（10進法）': 139.52707
                },
                {
                    '名称': '八雲台小学校',
                    '緯度（10進法）': 35.65377,
                    '経度（10進法）': 139.55241
                },
                {
                    '名称': '富士見台小学校',
                    '緯度（10進法）': 35.64763,
                    '経度（10進法）': 139.53716
                },
                {
                    '名称': '滝坂小学校',
                    '緯度（10進法）': 35.65922,
                    '経度（10進法）': 139.57672
                },
                {
                    '名称': '深大寺小学校',
                    '緯度（10進法）': 35.66651,
                    '経度（10進法）': 139.55231
                },
                {
                    '名称': '上ノ原小学校',
                    '緯度（10進法）': 35.6634,
                    '経度（10進法）': 139.56337
                },
                {
                    '名称': '石原小学校',
                    '緯度（10進法）': 35.66053,
                    '経度（10進法）': 139.53839
                },
                {
                    '名称': '若葉小学校',
                    '緯度（10進法）': 35.65493,
                    '経度（10進法）': 139.58328
                },
                {
                    '名称': '緑ヶ丘小学校',
                    '緯度（10進法）': 35.66969,
                    '経度（10進法）': 139.58476
                },
                {
                    '名称': '染地小学校',
                    '緯度（10進法）': 35.64213,
                    '経度（10進法）': 139.56039
                },
                {
                    '名称': '北ノ台小学校',
                    '緯度（10進法）': 35.67508,
                    '経度（10進法）': 139.55286
                },
                {
                    '名称': '多摩川小学校',
                    '緯度（10進法）': 35.64676,
                    '経度（10進法）': 139.53239
                },
                {
                    '名称': '杉森小学校',
                    '緯度（10進法）': 35.6419,
                    '経度（10進法）': 139.55476
                },
                {
                    '名称': '飛田給小学校',
                    '緯度（10進法）': 35.65483,
                    '経度（10進法）': 139.52313
                },
                {
                    '名称': '柏野小学校',
                    '緯度（10進法）': 35.66067,
                    '経度（10進法）': 139.55595
                },
                {
                    '名称': '国領小学校',
                    '緯度（10進法）': 35.64866,
                    '経度（10進法）': 139.56351548
                },
                {
                    '名称': '布田小学校',
                    '緯度（10進法）': 35.64302,
                    '経度（10進法）': 139.54562
                },
                {
                    '名称': '調和小学校',
                    '緯度（10進法）': 35.6514,
                    '経度（10進法）': 139.57378
                },
                {
                    '名称': '調布中学校',
                    '緯度（10進法）': 35.66504,
                    '経度（10進法）': 139.53485
                },
                {
                    '名称': '神代中学校',
                    '緯度（10進法）': 35.66201,
                    '経度（10進法）': 139.56174
                },
                {
                    '名称': '第三中学校',
                    '緯度（10進法）': 35.64128,
                    '経度（10進法）': 139.55644
                },
                {
                    '名称': '第四中学校',
                    '緯度（10進法）': 35.65358,
                    '経度（10進法）': 139.58319
                },
                {
                    '名称': '第五中学校',
                    '緯度（10進法）': 35.65242,
                    '経度（10進法）': 139.5257
                },
                {
                    '名称': '第六中学校',
                    '緯度（10進法）': 35.65028,
                    '経度（10進法）': 139.56103
                },
                {
                    '名称': '第七中学校',
                    '緯度（10進法）': 35.65406,
                    '経度（10進法）': 139.55998
                },
                {
                    '名称': '第八中学校',
                    '緯度（10進法）': 35.66407,
                    '経度（10進法）': 139.58179
                }
            ];

            schools.forEach(school => {

            const marker = new google.maps.Marker({
                position: { 
                    lat: school['緯度（10進法）'],
                    lng: school['経度（10進法）']
                },
                map: map,
                title: school['名称']
            });

            // 情報ウィンドウの作成
            const infowindow = new google.maps.InfoWindow({
                content: school['名称']
            });

            // クリックイベントの追加
            marker.addListener('click', () => {
                infowindow.open(map, marker);
            });

            markers.push(marker);
            });
        }
    </script>
    <script>
        // Google Maps APIキーを環境変数から取得
        const GOOGLE_MAPS_API_KEY = process.env.GOOGLE_MAPS_API_KEY || '';
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&callback=initMap`;
        script.async = true;
        document.body.appendChild(script);
    </script>
</body>
</html>
